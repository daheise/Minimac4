dist: xenial
language: cpp

complier:
  - gcc

install:
  - sudo apt-get install cmake python-pip python-dev bzip2 libboost-all-dev libopenblas-dev
  - sudo pip install --upgrade pip
  - pip install --user cget
  - wget https://github.com/samtools/htslib/releases/download/1.9/htslib-1.9.tar.bz2
  - tar xvjf htslib-1.9.tar.bz2
  - pushd htslib-1.9
  - ./configure
  - make
  - sudo make install
  - popd
  - wget https://github.com/daheise/Eagle/archive/parallel-bgz.zip
  - unzip parallel-bgz.zip
  - pushd Eagle-parallel-bgz/src
  - make
  - popd
  - bash install.sh

script:
  - release-build/minimac4 --noPhoneHome --help || if [ $? -eq 255 ]; then echo "Expected non-zero exit code"; fi
